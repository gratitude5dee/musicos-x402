# ============================================================================
# MCP Server Configuration - x402 Agents Commerce Protocol
# ============================================================================

# Server Configuration
MCP_MODE=mock                          # mock for dev, live for production
MCP_PORT=8974                          # HTTP server port
MCP_BEARER_TOKEN=your-secure-token-here  # Shared secret for auth
NODE_ENV=development

# Supabase Configuration
MCP_SUPABASE_URL=https://your-project.supabase.co
MCP_SUPABASE_ANON_KEY=your-anon-key
MCP_SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
MCP_SUPABASE_FUNCTION_JWT=your-function-jwt
MCP_SUPABASE_SCHEMA=public

# SQL Security - Allowlisted Queries
MCP_ALLOWLISTED_SQL='{"list_creator_assets":"SELECT * FROM creator_assets WHERE creator_id = :creator_id LIMIT :limit","treasury_balances":"SELECT symbol, balance FROM treasury_balances WHERE creator_id = :creator_id","agent_activity":"SELECT * FROM agent_activity_log WHERE agent_id = :agent_id ORDER BY created_at DESC LIMIT :limit"}'

# RPC Security - Allowlisted Functions
MCP_ALLOWLISTED_RPCS='{"create-wallet":{"type":"edge","name":"create-wallet"},"transfer-sol":{"type":"edge","name":"transfer-sol"},"log_agent_activity":{"type":"postgres","name":"log_agent_activity"},"match_kb_chunks":{"type":"postgres","name":"match_kb_chunks"}}'

# Storage Configuration
MCP_STORAGE_BUCKETS='["agent-artifacts","wzrd-renders","analytics-exports","nft-metadata"]'
MCP_STORAGE_DEFAULT_EXPIRY=3600        # Signed URL expiry in seconds

# Crossmint Configuration
MCP_CROSSMINT_API_KEY=your-crossmint-api-key
MCP_CROSSMINT_PROJECT_ID=your-project-id
MCP_CROSSMINT_BASE_URL=https://staging.crossmint.com
MCP_CROSSMINT_DRY_RUN=true            # Set to false for real transactions

# Wallet Security
MCP_WALLET_MAX_SOL=10.0               # Maximum SOL per transaction
MCP_WALLET_CONFIRMATION_SECRET=your-hmac-secret-256-bits
MCP_WALLET_CONFIRMATION_TTL=600       # Confirmation token TTL in seconds
MCP_WALLET_TRANSFER_FUNCTION=transfer-sol
MCP_WALLET_MEMO_PREFIX=MUSICOS

# Knowledge Base Configuration
MCP_KB_MATCH_RPC=match_kb_chunks
MCP_KB_LIST_RPC=list_kb_resources
MCP_KB_TABLE=agent_memory_chunks
MCP_KB_DEFAULT_LIMIT=10
MCP_KB_SIMILARITY_THRESHOLD=0.75

# Web Search Configuration
MCP_WEB_SEARCH_API_KEY=your-tavily-or-perplexity-key
MCP_WEB_SEARCH_ENDPOINT=https://api.tavily.com/search
MCP_WEB_SEARCH_MAX_RESULTS=5

# Embedding Configuration
MCP_EMBEDDING_API_KEY=your-openai-api-key
MCP_EMBEDDING_ENDPOINT=https://api.openai.com/v1/embeddings
MCP_EMBEDDING_MODEL=text-embedding-3-small
MCP_EMBEDDING_DIMENSIONS=1536

# Rate Limiting
MCP_RATE_LIMIT_WINDOW=60000           # 1 minute in ms
MCP_RATE_LIMIT_MAX_REQUESTS=100       # Max requests per window

# Observability
MCP_LOG_LEVEL=info
MCP_ENABLE_METRICS=true
MCP_ENABLE_TRACING=true
MCP_SENTRY_DSN=your-sentry-dsn
